@{
    Layout = "";
}
<!--Dev
<iframe width="880" height="550"  frameborder="1" seamless src="https://app.powerbi.com/view?r=eyJrIjoiNzk4NzMwMzAtODNmYS00MmUwLTgyNTUtODE5ZjY5Y2MyNGVmIiwidCI6ImQ4ODA1YjdhLWNmYWQtNDBmYS1iOWQ1LWQ0YzQyOTU5M2YxMSIsImMiOjEwfQ%3D%3D" frameborder="0" allowfullscreen="true"></iframe> 
-->

<!--uat-->
<!-- 
<iframe width="880" height="550" seamless src="https://app.powerbi.com/view?r=eyJrIjoiNjc0MDc0NTUtYTRkZS00YzI5LTljMjQtYWM3YzE3MDBmYzY3IiwidCI6ImQ4ODA1YjdhLWNmYWQtNDBmYS1iOWQ1LWQ0YzQyOTU5M2YxMSIsImMiOjEwfQ%3D%3D" frameborder="0" allowfullscreen="true"></iframe>
--> 

<!--Production-->
<!--    -->
<iframe width="880" height="550" src="https://app.powerbi.com/view?r=eyJrIjoiNjJlOGEzMzYtNjQzYi00MTMwLWJlNzMtYWVjMmUwMDIzYWEyIiwidCI6ImQ4ODA1YjdhLWNmYWQtNDBmYS1iOWQ1LWQ0YzQyOTU5M2YxMSIsImMiOjEwfQ%3D%3D" frameborder="0" allowfullscreen="true"></iframe>



<script type="text/javascript">
    $(docment).ready(function () {     
             // Get a reference to the embedded report HTML element
        var embedContainer = $('#reportLandingContainer')[0];

        // Get a reference to the embedded report.
        report = powerbi.get(embedContainer);

        // Displays the report in full screen mode.
        report.fullscreen();
    })
</script>





@*@using BEL.ItemCodeCreationPreProcess.Models.PowerBIReport.Report
    @model EmbedConfig
    @{
        ViewBag.Title = "ICCP Report";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }*@


@*<script src="https://npmcdn.com/es6-promise@3.2.1"></script>
    <script src="~/scripts/ProjectScripts/PowerBIReport/powerbi.js"></script>
    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
    {
        <div id="errorWrapper">
            <h2>
                Error
            </h2>
            <pre>
                @Model.ErrorMessage
            </pre>
        </div>

        return;
    }

        <div class="row mbl">
            <div class="col-lg-12">
                <div class="row" id="reportContainer" style="height:700px;"></div>
            </div>
        </div>


            <script>
                // Read embed application token from Model
                var accessToken = "@Model.EmbedToken.Token";

                // Read embed URL from Model
                var embedUrl = "@Html.Raw(Model.EmbedUrl)";

                // Read report Id from Model
                var embedReportId = "@Model.Id";

                // Get models. models contains enums that can be used.
                var models = window['powerbi-client'].models;

                // Embed configuration used to describe the what and how to embed.
                // This object is used when calling powerbi.embed.
                // This also includes settings and options such as filters.
                // You can find more information at https://github.com/Microsoft/PowerBI-JavaScript/wiki/Embed-Configuration-Details.
                var config = {
                    type: 'report',
                    tokenType: models.TokenType.Embed,
                    accessToken: accessToken,
                    embedUrl: embedUrl,
                    id: embedReportId,
                    permissions: models.Permissions.All,
                    settings: {
                        filterPaneEnabled: false,
                        navContentPaneEnabled: true
                    }
                };

                // Get a reference to the embedded report HTML element
                var reportContainer = $('#reportContainer')[0];

                if ("@Model.Username" != "") {
                    $("#RLS").prop('checked', true);
                    $("#RLSdiv").show();
                }
                else {
                    $("#RLS").prop('checked', false);
                    $("#RLSdiv").hide();
                }

                if ("@Model.IsEffectiveIdentityRequired.GetValueOrDefault()" == "True") {
                    $("#noRLSdiv").hide();
                    $("#RLS").removeAttr("disabled");
                    $("#RLS").change(function () {
                        if ($(this).is(":checked")) {
                            $("#RLSdiv").show(300);
                        } else {
                            $("#RLSdiv").hide(200);
                        }
                    });
                }
                else {
                    $("#noRLSdiv").show();
                }
                // Embed the report and display it within the div container.
                var report = powerbi.embed(reportContainer, config);
            </script>*@
